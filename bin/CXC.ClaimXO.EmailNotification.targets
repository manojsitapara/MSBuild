<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0" >

  <Target Name="SendEmailNotification">

    <Copy SourceFiles="$(ErrorLogFileName)" DestinationFiles="$(TempDirForLog)\Email_CXC.ClaimXO.MSBuild.Error_$(CurrentDateTime).log" />
    
    <ItemGroup>
      <File Include="$(TempDirForLog)\Email_CXC.ClaimXO.MSBuild.Error_$(CurrentDateTime).log" />
    </ItemGroup>

    <ReadLinesFromFile File="@(File)">
      <Output TaskParameter="Lines" ItemName="FileContents" />
    </ReadLinesFromFile>

    
    <SendEmail
      ToEmailAddress="$(ErrorNotificationToAddress)"
      Subject="Build failed: Target name $(CurrentTargetName)"
      Message="Error details: @(FileContents->'%(Identity)', '%0a%0d') See log file for additional details..." />
    
    
    
  </Target>


</Project>